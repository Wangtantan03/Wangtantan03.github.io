<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JMeter自学教程 | Tantan Wang</title>
    <meta name="description" content="talk is cheap, show me your code">
    <link rel="icon" href="/images/photo.jpg">
  <link rel="manifest" href="/images/photo.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.1280d75e.css" as="style"><link rel="preload" href="/assets/js/app.f1109acb.js" as="script"><link rel="preload" href="/assets/js/2.766f04b6.js" as="script"><link rel="preload" href="/assets/js/12.1cab0cc7.js" as="script"><link rel="prefetch" href="/assets/js/10.a7339ec4.js"><link rel="prefetch" href="/assets/js/11.9e63b8e2.js"><link rel="prefetch" href="/assets/js/13.ddb00c9e.js"><link rel="prefetch" href="/assets/js/14.04d2a6a2.js"><link rel="prefetch" href="/assets/js/15.09990f0b.js"><link rel="prefetch" href="/assets/js/16.d576dc86.js"><link rel="prefetch" href="/assets/js/17.5d0e6169.js"><link rel="prefetch" href="/assets/js/18.e7a3e3ef.js"><link rel="prefetch" href="/assets/js/19.1b7a05a6.js"><link rel="prefetch" href="/assets/js/20.ec145e4d.js"><link rel="prefetch" href="/assets/js/21.ccbd2f45.js"><link rel="prefetch" href="/assets/js/22.26d05ccb.js"><link rel="prefetch" href="/assets/js/23.0ca4b540.js"><link rel="prefetch" href="/assets/js/3.f0e2f31e.js"><link rel="prefetch" href="/assets/js/4.ede1e90d.js"><link rel="prefetch" href="/assets/js/5.64e75dbc.js"><link rel="prefetch" href="/assets/js/6.ac0ae117.js"><link rel="prefetch" href="/assets/js/7.f5784fde.js"><link rel="prefetch" href="/assets/js/8.481ee70d.js"><link rel="prefetch" href="/assets/js/9.00c57cf9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1280d75e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Tantan Wang</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">软件测试</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Software_Testing/python/python.html" class="nav-link">python</a></li><li class="dropdown-item"><!----> <a href="/Software_Testing/Test_Basics/测试基础.html" class="nav-link">测试基础</a></li><li class="dropdown-item"><!----> <a href="/Software_Testing/Automated_Test/selenium.html" class="nav-link">自动化测试</a></li></ul></div></div><div class="nav-item"><a href="/algorithm/1.html" class="nav-link">算法相关</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">产品思维</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Product_related/note.html" class="nav-link">产品笔记</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">日常生活</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Daily_Life/Reading/Reading.html" class="nav-link">读万卷书</a></li><li class="dropdown-item"><!----> <a href="/Daily_Life/Traveling/Traveling.html" class="nav-link">行万里路</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Wangtantan03" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.cnblogs.com/ilym/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  老博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">软件测试</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Software_Testing/python/python.html" class="nav-link">python</a></li><li class="dropdown-item"><!----> <a href="/Software_Testing/Test_Basics/测试基础.html" class="nav-link">测试基础</a></li><li class="dropdown-item"><!----> <a href="/Software_Testing/Automated_Test/selenium.html" class="nav-link">自动化测试</a></li></ul></div></div><div class="nav-item"><a href="/algorithm/1.html" class="nav-link">算法相关</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">产品思维</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Product_related/note.html" class="nav-link">产品笔记</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">日常生活</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Daily_Life/Reading/Reading.html" class="nav-link">读万卷书</a></li><li class="dropdown-item"><!----> <a href="/Daily_Life/Traveling/Traveling.html" class="nav-link">行万里路</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Wangtantan03" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.cnblogs.com/ilym/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  老博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>自动化测试</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Software_Testing/Automated_Test/selenium.html" class="sidebar-link">selenium实战篇</a></li><li><a href="/Software_Testing/Automated_Test/1.html" class="active sidebar-link">JMeter自学教程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Software_Testing/Automated_Test/1.html#jmeter介绍和使用场景" class="sidebar-link">JMeter介绍和使用场景</a></li><li class="sidebar-sub-header"><a href="/Software_Testing/Automated_Test/1.html#jmeter5-x-gui图形界面的安装" class="sidebar-link">JMeter5.X GUI图形界面的安装</a></li><li class="sidebar-sub-header"><a href="/Software_Testing/Automated_Test/1.html#jmeter创建api接口压力测试计划" class="sidebar-link">JMeter创建api接口压力测试计划</a></li><li class="sidebar-sub-header"><a href="/Software_Testing/Automated_Test/1.html#jmeter创建数据库测试计划" class="sidebar-link">JMeter创建数据库测试计划</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="jmeter自学教程"><a href="#jmeter自学教程" aria-hidden="true" class="header-anchor">#</a> JMeter自学教程</h1> <h2 id="jmeter介绍和使用场景"><a href="#jmeter介绍和使用场景" aria-hidden="true" class="header-anchor">#</a> JMeter介绍和使用场景</h2> <h3 id="压测不同的协议和应用"><a href="#压测不同的协议和应用" aria-hidden="true" class="header-anchor">#</a> 压测不同的协议和应用</h3> <ul><li>Web - HTTP、HTTPS(Java、NodeJs、PHP、ASP.NET、…)</li> <li>SOAP / REST Webservices</li> <li>FTP</li> <li>Database via  JDBC : 通过JDBC访问的数据库</li> <li>LDAP 轻量目录访问协议</li> <li>Message-oriented middleware (MOM) via JMS</li> <li>Mail -SMTP(S)、POP3(S) and IMAP(S)：邮件协议</li> <li>TCP等等</li></ul> <h3 id="使用场景及优点"><a href="#使用场景及优点" aria-hidden="true" class="header-anchor">#</a> 使用场景及优点</h3> <ul><li>功能测试</li> <li>压力测试</li> <li>分布式压力测试</li> <li>纯java开发</li> <li>上手容易，高性能</li> <li>提供测试数据分析</li> <li>各种报表数据图形展示</li></ul> <h2 id="jmeter5-x-gui图形界面的安装"><a href="#jmeter5-x-gui图形界面的安装" aria-hidden="true" class="header-anchor">#</a> JMeter5.X GUI图形界面的安装</h2> <h3 id="jmeter前提条件"><a href="#jmeter前提条件" aria-hidden="true" class="header-anchor">#</a> JMeter前提条件</h3> <h4 id="_1-下载安装jdk"><a href="#_1-下载安装jdk" aria-hidden="true" class="header-anchor">#</a> 1. 下载安装JDK</h4> <h5 id="最新版本：2019年7月"><a href="#最新版本：2019年7月" aria-hidden="true" class="header-anchor">#</a> <a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener noreferrer">最新版本<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：2019年7月</h5> <h5 id="历史版本：2019年7月"><a href="#历史版本：2019年7月" aria-hidden="true" class="header-anchor">#</a> <a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener noreferrer">历史版本<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：2019年7月</h5> <div class="tip custom-block"><p class="custom-block-title">选择符合自己电脑的JDK</p> <p>选择Accept License Agreement，然后选择Mac OS X x64版本JDK (博主使用的是mac笔记本)</p></div> <p>（1）开始下载
<img src="/images/JDK_download.png" alt="">
（2）下载完成后，打开并点击继续进行安装
<img src="/images/anzhuang.png" alt="">
（3）安装完成后，终端输入：</p> <div class="language-python extra-class"><pre class="language-python"><code>java <span class="token operator">-</span>version <span class="token comment"># 如果安装成功，会显示jdk的版本号码</span>
</code></pre></div><p>（4）mac的dmg安装包安装后，环境变量也直接给配置好了</p> <h4 id="_2-下载安装jmeter5-x"><a href="#_2-下载安装jmeter5-x" aria-hidden="true" class="header-anchor">#</a> 2. 下载安装JMeter5.X</h4> <h5 id="最新版本：2019年7月-2"><a href="#最新版本：2019年7月-2" aria-hidden="true" class="header-anchor">#</a> <a href="http://jmeter.apache.org/download_jmeter.cgi" target="_blank" rel="noopener noreferrer">最新版本<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：2019年7月</h5> <h5 id="历史版本：2019年7月-2"><a href="#历史版本：2019年7月-2" aria-hidden="true" class="header-anchor">#</a> <a href="https://archive.apache.org/dist/jmeter/binaries/" target="_blank" rel="noopener noreferrer">历史版本<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：2019年7月</h5> <div class="tip custom-block"><p class="custom-block-title">JMeter不区分版本</p> <p>直接下载Binaries解压就可以用（也可以选择下载源码，自己编译安装）</p></div> <p>(1)建议将下载压缩包移动到当前用户目录下，方便查找</p> <div class="language-python extra-class"><pre class="language-python"><code>mv <span class="token operator">/</span>Users<span class="token operator">/</span>wangtantan<span class="token operator">/</span>Downloads<span class="token operator">/</span>apache<span class="token operator">-</span>jmeter<span class="token operator">-</span><span class="token number">5.1</span><span class="token number">.1</span><span class="token punctuation">.</span>tgz <span class="token operator">/</span>Users<span class="token operator">/</span>wangtantan
</code></pre></div><p>(2) 解压jmeter-5.1.1压缩包</p> <div class="language-python extra-class"><pre class="language-python"><code>tar zxvf apache<span class="token operator">-</span>jmeter<span class="token operator">-</span><span class="token number">5.1</span><span class="token number">.1</span><span class="token punctuation">.</span>tgz
</code></pre></div><p>(3) 启动Jmeter</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 进入bin目录</span>
cd apache<span class="token operator">-</span>jmeter<span class="token operator">-</span><span class="token number">5.1</span><span class="token number">.1</span><span class="token operator">/</span><span class="token builtin">bin</span><span class="token operator">/</span>
<span class="token comment"># 通过sh jmeter启动</span>
sh jmeter

<span class="token comment"># 终端出现一段提示，意思是：不要使用GUI模式进行负载测试，要使用NON GUI模式</span>
</code></pre></div><p>(4) 配置jmeter环境变量，方便启动
通过vim .bash_profile进入vim编辑器，输入如下内容,并保存</p> <div class="language-python extra-class"><pre class="language-python"><code>export JMETER_HOME<span class="token operator">=</span><span class="token operator">/</span>Users<span class="token operator">/</span>wangtantan<span class="token operator">/</span>apache<span class="token operator">-</span>jmeter<span class="token operator">-</span><span class="token number">5.1</span><span class="token number">.1</span>  <span class="token comment"># jmeter解压文件所在位置</span>
export PATH<span class="token operator">=</span>$JAVA_HOME<span class="token operator">/</span><span class="token builtin">bin</span><span class="token punctuation">:</span>$PATH<span class="token punctuation">:</span><span class="token punctuation">.</span><span class="token punctuation">:</span>$JMETER_HOME<span class="token operator">/</span><span class="token builtin">bin</span><span class="token punctuation">:</span>$PATH
export CLASSPATH<span class="token operator">=</span><span class="token punctuation">.</span><span class="token punctuation">:</span>$JAVA_HOME<span class="token operator">/</span>lib<span class="token operator">/</span>dt<span class="token punctuation">.</span>jar<span class="token punctuation">:</span>$JAVA_HOME<span class="token operator">/</span>lib<span class="token operator">/</span>tools<span class="token punctuation">.</span>jar<span class="token punctuation">:</span>$JMETER_HOME<span class="token operator">/</span>lib<span class="token operator">/</span>ext<span class="token operator">/</span>ApacheJMeter_core<span class="token punctuation">.</span>jar<span class="token punctuation">:</span>$JMETER_HOME<span class="token operator">/</span>lib<span class="token operator">/</span>jorphan<span class="token punctuation">.</span>jar<span class="token punctuation">:</span>$JMETER_HOME<span class="token operator">/</span>lib<span class="token operator">/</span>logkit<span class="token operator">-</span><span class="token number">2.0</span><span class="token punctuation">.</span>jar
</code></pre></div><p>(5) 保存并退出编辑器后，终端输入：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 目的是为了让配置的jmeter环境变量立即生效</span>
source <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bash_profile
</code></pre></div><p>(6) 然后在任意目录下，终端输入：</p> <div class="language-python extra-class"><pre class="language-python"><code>jmeter
</code></pre></div><p>jmeter便会立即启动
<img src="/images/jmeter_qidong.png" alt=""></p> <h3 id="_3-jmeter5-x语言版本切换"><a href="#_3-jmeter5-x语言版本切换" aria-hidden="true" class="header-anchor">#</a> 3. JMeter5.X语言版本切换</h3> <h4 id="_1-控制台修改"><a href="#_1-控制台修改" aria-hidden="true" class="header-anchor">#</a> (1)控制台修改</h4> <p><strong>menu -&gt; options -&gt; choose language</strong></p> <h4 id="_2-配置文件修改"><a href="#_2-配置文件修改" aria-hidden="true" class="header-anchor">#</a> (2)配置文件修改</h4> <p><strong>bin -&gt; jmeter.properties</strong></p> <ul><li><strong>默认: language=en 改为：language=zh_CN</strong></li></ul> <h3 id="jmeter常用目录介绍"><a href="#jmeter常用目录介绍" aria-hidden="true" class="header-anchor">#</a> JMeter常用目录介绍</h3> <h4 id="bin-核心可执行文件"><a href="#bin-核心可执行文件" aria-hidden="true" class="header-anchor">#</a> bin: 核心可执行文件</h4> <ul><li><strong>jemeter.bat:</strong>  windows启动文件</li> <li><strong>jemeter:</strong> mac或Linux启动文件</li> <li><strong>jemeter-server:</strong> mac或Linux分布式压测使用的启动文件</li> <li><strong>jemeter-server.bat:</strong> windows分布式压测使用的启动文件</li></ul> <h4 id="extras-插件拓展包"><a href="#extras-插件拓展包" aria-hidden="true" class="header-anchor">#</a> extras: 插件拓展包</h4> <h4 id="lib-核心的依赖包"><a href="#lib-核心的依赖包" aria-hidden="true" class="header-anchor">#</a> lib: 核心的依赖包</h4> <ul><li><strong>ext:</strong> 核心包</li> <li><strong>junit:</strong> 单元测试包</li></ul> <h2 id="jmeter创建api接口压力测试计划"><a href="#jmeter创建api接口压力测试计划" aria-hidden="true" class="header-anchor">#</a> JMeter创建api接口压力测试计划</h2> <h3 id="利用pyhton-flask框架编写简单的接口api"><a href="#利用pyhton-flask框架编写简单的接口api" aria-hidden="true" class="header-anchor">#</a> 利用pyhton+flask框架编写简单的接口api</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># -*- coding:utf-8 -*-</span>
<span class="token keyword">import</span> flask
<span class="token keyword">import</span> json

<span class="token comment"># ----------------定义一个server------------</span>
<span class="token comment"># __name__代表当前的python文件，把其当作一个服务启动</span>
server <span class="token operator">=</span> flask<span class="token punctuation">.</span>Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>

<span class="token comment"># ----------------定义一个接口函数------------</span>
<span class="token comment"># Flask中的route()装饰器用于将URL绑定到函数index(),如果用户访问该URL，则函数index()的输出内容将展示在浏览器中</span>
<span class="token comment"># 第一个参数 '/index' 规则绑定到index()函数,表示可访问的路径；第二个参数代表允许的方法，默认是get</span>
<span class="token decorator annotation punctuation">@server<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/index'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'get'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    res <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'msg'</span><span class="token punctuation">:</span> <span class="token string">'我的第一个接口'</span><span class="token punctuation">,</span> <span class="token string">'code'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span>
    <span class="token keyword">return</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>res<span class="token punctuation">,</span> ensure_ascii<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

<span class="token comment"># ---------------server执行起来------------</span>
<span class="token comment"># host是监听的端口，0.0.0.0表示监听所有网卡，别人可以访问此接口，如果是127.0.0.1，只监听本机</span>
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
     server<span class="token punctuation">.</span>run<span class="token punctuation">(</span>port<span class="token operator">=</span><span class="token number">8888</span><span class="token punctuation">,</span> debug<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> host<span class="token operator">=</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="压测接口流程图解"><a href="#压测接口流程图解" aria-hidden="true" class="header-anchor">#</a> 压测接口流程图解</h3> <p><strong>本地启动接口 --&gt; JMeter创建一个线程组为压测做准备 --&gt; 添加察看结果树，察看发送的请求及请求后的返回值</strong></p> <h4 id="创建线程组"><a href="#创建线程组" aria-hidden="true" class="header-anchor">#</a> 创建线程组</h4> <p><img src="/images/1.png" alt=""></p> <h4 id="添加http-get请求"><a href="#添加http-get请求" aria-hidden="true" class="header-anchor">#</a> 添加http get请求</h4> <p><img src="/images/2.png" alt=""></p> <h4 id="添加察看结果树"><a href="#添加察看结果树" aria-hidden="true" class="header-anchor">#</a> 添加察看结果树</h4> <p><img src="/images/3.png" alt=""></p> <h2 id="jmeter创建数据库测试计划"><a href="#jmeter创建数据库测试计划" aria-hidden="true" class="header-anchor">#</a> JMeter创建数据库测试计划</h2> <blockquote><p>将创建五十个用户向数据库服务器发送2个SQL请求。并且，使这些用户运行测试100次。所以，请求的总数:
（50个用户）x（1个请求）x（重复100次）= 5000个JDBC请求。要构建测试计划，您将使用以下元素： 线程组， JDBC请求，聚合报告。</p></blockquote> <h4 id="创建jmeter测试计划"><a href="#创建jmeter测试计划" aria-hidden="true" class="header-anchor">#</a> 创建JMeter测试计划</h4> <ul><li>选择测试计划节点，然后右键单击所选项目</li> <li>鼠标悬停在“Add”选项上，然后将显示元素列表</li> <li>选择“线程(用户)” -&gt; “Thread Group”</li> <li>将此线程组重命名为：JDBC用户组</li> <li>将线程数（用户数）增加到50</li> <li>在Ramp-Up Period输入：10</li> <li>在循环计数字段中输入值100</li></ul> <p><img src="/images/JDBC_users.png" alt=""></p> <h4 id="添加jdbc请求"><a href="#添加jdbc请求" aria-hidden="true" class="header-anchor">#</a> 添加JDBC请求</h4> <ul><li>右键单击JDBC users元素</li> <li>鼠标悬停在“Add” 选项上，然后将显示元素列表</li> <li>选择Config Element -&gt; JDBC Connection Configuration</li> <li>将JDBC Connection Configuration，重命令名为：MySQL Configuration</li></ul> <p><img src="/images/JDBC_add.png" alt=""></p> <p>注意：需要设置一些重要的字段，这些字段将决定数据库和JMeter之间的正确连接。 字段设置如下**</p> <ul><li>绑定到池的变量名称：它唯一地标识配置。 JDBC Sampler将进一步使用此名称来标识要使用的配置。这里我将其命名为MyDatabase</li> <li>输入数据库URL： jdbc:mysql://localhost:14004/iyanyixxxx（其中localhost:14004是数据库的地址和端口号，iyanyixxx是测试数据库名）</li> <li>选择JDBC驱动程序： - com.mysql.jdbc.Driver (注：这里事先已将mysql-connector-java-5.1.48.jar放到Jmeter目录中的lib文件下)</li> <li>用户：数据库登录名</li> <li>密码：数据库登录密码</li> <li>其他字段保存不变</li></ul> <p><img src="/images/JDBC_configuration.png" alt=""></p> <ul><li>右键单击JDBC users元素</li> <li>鼠标悬停在“Add”选项上，然后将显示元素列表</li> <li>选择Sampler -&gt; JDBC request</li> <li>然后设置重要的字段：
<ol><li>名字 - JDBC Request</li> <li>输入池名称：MyDatabase，与绑定到池的变量名称相同</li> <li>查询类型 - 选择语句</li> <li>查询：这里我的使用如下查询语句：SELECT SUM(ViewCount) FROM ot_opera_tour_xxxx</li></ol></li></ul> <p><img src="/images/JDBC_request.png" alt=""></p> <h4 id="创建监听器，并运行"><a href="#创建监听器，并运行" aria-hidden="true" class="header-anchor">#</a> 创建监听器，并运行</h4> <p>添加&quot;察看结果树&quot;和&quot;聚合报告&quot;，点击运行，就OK了</p> <p><img src="/images/JDBC_result.png" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Software_Testing/Automated_Test/selenium.html" class="prev">
          selenium实战篇
        </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f1109acb.js" defer></script><script src="/assets/js/2.766f04b6.js" defer></script><script src="/assets/js/12.1cab0cc7.js" defer></script>
  </body>
</html>
